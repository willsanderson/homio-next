Hemma:
  modes:
    light:
      primary-background-color: rgb(50, 50, 50)
      secondary-background-color: rgb(40, 40, 40)
      app-header-background-color: rgba(76, 80, 84, 0.3)
      ha-card-background: rgba(200,200,200,0.08)
      ha-card-background-active: rgba(255,255,255,0.3)
      ha-dialog-background: rgba(255,255,255,0.1)
      hemma-control-off: rgba(0,0,0,.08)
      hemma-control-on: rgba(255,255,255,0.1)
      thermostat-card-off: var(--hemma-control-off)
      thermostat-card-on: var(--hemma-control-on)
      button-card-box-shadow: var(--ha-shadow-light)
      button-card-box-shadow-active: var(--ha-shadow-light-active)

      navbar-primary-color: var(--hemma-nav-icon-active)
      hemma-nav-bg: rgba(255,255,255,0.08)
      hemma-nav-border: rgba(255,255,255,0.18)
      hemma-nav-shadow: >
        inset 3px 3px 6px -6px rgba(255,255,255,0.4),
        inset -3px -3px 6px -6px rgba(255,255,255,0.4),
        inset 0 0 3px -1px rgba(255,255,255,0.07),
        0 3px 9px rgba(0,0,0,0.05)
      hemma-nav-inactive-opacity: .7
      hemma-nav-icon: rgba(255,255,255,.85)
      hemma-nav-icon-active: rgba(255,255,255,1)
      hemma-nav-active-fill: rgba(255,255,255,0.2)
      hemma-nav-fade: |
        linear-gradient(
          to top,
          rgba(100,100,100,0.98) 0%,
          rgba(100,100,100,0.76) 22%,
          rgba(100,100,100,0.40) 42%,
          rgba(100,100,100,0.16) 68%,
          rgba(100,100,100,0.00) 95%
        )

      primary-text-color: "#ffffff"
      text-primary-color: rgba(255,255,255,.95)
      secondary-text-color: rgba(240,240,240,0.8)
      disabled-text-color: rgba(208,208,208,0.5)
      sidebar-icon-color: '#aaaaad'
      sidebar-text-color: '#c9c9c9'
      dark-vignette: 0

    dark:
      primary-background-color: rgb(40, 40, 40)
      secondary-background-color: rgb(20, 20, 20)
      app-header-background-color: rgba(76, 80, 84, 0.3)
      ha-card-background-active: rgba(100,100,100,0.25)
      ha-card-background: rgba(0,0,0,0.35)
      ha-dialog-background: rgba(0,0,0,0.35)
      hemma-control-off: rgba(150,150,150,0.12)
      hemma-control-on: rgba(255,255,255,0.12)
      thermostat-card-off: var(--hemma-control-off)
      thermostat-card-on: var(--hemma-control-on)
      button-card-box-shadow: var(--ha-shadow-dark)
      button-card-box-shadow-active: var(--ha-shadow-dark-active)

      navbar-primary-color: var(--hemma-nav-icon-active)
      hemma-nav-bg: rgba(0,0,0,.3)
      hemma-nav-border: rgba(240,240,240,0.18)
      hemma-nav-inactive-opacity: .72
      hemma-nav-icon: rgba(255,255,255,.96)
      hemma-nav-icon-active: rgba(255,255,255,.96)
      hemma-nav-shadow: >
        inset 0 10px 14px -16px rgba(0,0,0,0.25),
        inset 0 -10px 18px -16px rgba(0,0,0,0.18),
        inset 0 0 0 .8px rgba(0,0,0,0.03),
        0 12px 24px rgba(0,0,0,0.04)
      hemma-nav-active-fill: rgba(255,255,255,0.2)
      hemma-nav-fade: |
        linear-gradient(
          to top,
          rgba(40,40,40,0.90) 0%,
          rgba(40,40,40,0.75) 22%,
          rgba(40,40,40,0.45) 42%,
          rgba(40,40,40,0.22) 72%,
          rgba(40,40,40,0.00) 98%
        )

      primary-text-color: "#ffffff"
      text-primary-color: rgba(255,255,255,.98)
      secondary-text-color: rgba(240,240,240,0.9)
      disabled-text-color: rgba(208,208,208,0.5)
      sidebar-icon-color: '#67676b'
      sidebar-text-color: '#a8a8a8'
      vignette-alpha: 0.78
      vignette-edge: 0.68
      vignette-bottom: 0.34
      dark-vignette: 1

  # ============================================================================
  # SHARED VALUES (same in light and dark modes)
  # ============================================================================

  app-theme-color: rgb(0, 0, 0)
  ha-card-box-shadow: none
  hero-tint: rgba(55,55,55,0.50)
  hero-img-filter: saturate(1.02) brightness(.985)
  hemma-nav-height: 62px

  # ============================================================================
  # BUTTON CARD SHADOWS
  # ============================================================================

  ha-shadow-light: >
    inset 0 0 0 1px rgba(255,255,255,0.06),
    inset 6px 6px 10px -10px rgba(255,255,255,0.13),
    inset -6px -6px 10px -10px rgba(255,255,255,0.16),
    inset 0 0 3px -1px rgba(255,255,255,0.24),
    0 14px 22px rgba(0,0,0,0.04)

  ha-shadow-light-active: >
    inset 0 0 0 1px rgba(255,255,255,0.22),
    inset 0 0 44px -24px rgba(0,0,0,0.24),
    0 14px 22px rgba(0,0,0,0.04)

  ha-shadow-dark: >
    inset 0 0 0 1px rgba(120,120,120,0.14),
    inset 0 10px 18px -16px rgba(255,255,255,0.12),
    inset 0 -10px 18px -16px rgba(255,255,255,0.12),
    inset 1.5px 1.5px 1px -1.5px rgba(255,255,255,0.14),
    inset -1.5px -1.5px 1px -1.5px rgba(255,255,255,0.14),
    0 18px 20px rgba(0,0,0,0.04)

  ha-shadow-dark-active: >
    inset 0 0 0 1px rgba(220,220,220,0.09),
    inset 0 10px 16px -16px rgba(255,255,255,0.16),
    inset 0 -10px 18px -16px rgba(255,255,255,0.13),
    inset 1.5px 1.5px 1px -1.5px rgba(255,255,255,0.16),
    inset -1.5px -1.5px 1px -1.5px rgba(255,255,255,0.13),
    0 18px 20px rgba(0,0,0,0.04)

  # ============================================================================
  # TYPOGRAPHY
  # ============================================================================

  primary-font-family: "Hanken Grotesk"
  ha-font-family-body: var(--primary-font-family)
  ha-card-header-font-family: var(--primary-font-family)

  app-header-backdrop-filter: blur(10px)
  app-header-edit-background-color: rgba(0,0,0,0.2)

  sidebar-background-color: var(--secondary-background-color)
  sidebar-selected-background-color: var(--primary-background-color)
  sidebar-selected-icon-color: var(--primary-text-color)
  sidebar-selected-text-color: var(--sidebar-selected-icon-color)

  # ============================================================================
  # COLORS & ACCENTS
  # ============================================================================
  
  state-inactive-color: '#bdbdbd'
  primary-color: '#61b4ff'
  accent-color: '#61b4ff'
  divider-color: rgba(50, 50, 50, 0.8)
  state-icon-color: var(--primary-color)
  ha-color-on-primary-normal: var(--primary-color)

  # ============================================================================
  # ENTITY CARD LAYOUT (responsive sizing per breakpoint)
  # ============================================================================

  # Entity Layout - Desktop
  hemma-entity-height-desktop: 190px
  hemma-entity-inner-pad-desktop: 24px
  hemma-entity-name-font-desktop: 18px
  hemma-entity-state-font-desktop: 15px
  hemma-entity-icon-size-desktop: 34px
  hemma-entity-rows-desktop: repeat(1, auto)
  hemma-entity-col-width-desktop: 280px
  hemma-entity-justify-desktop: start
  hemma-entity-right-inset-desktop: 0px
  hemma-entity-bottom-desktop: 20px
  hemma-entity-shadow-pad-right-desktop: 0px
  hemma-entity-overflow-y-desktop: hidden

  # Entity Layout - Tablet
  hemma-entity-col-width-tablet: 210px
  hemma-entity-height-tablet: 150px
  hemma-entity-inner-pad-tablet: 18px
  hemma-entity-name-font-tablet: 16px
  hemma-entity-state-font-tablet: 15px
  hemma-entity-icon-size-tablet: 28px
  hemma-time-nudge-tablet: 36px
  hemma-entity-overflow-y-tablet: hidden

  # Entity Layout - Mobile Portrait
  hemma-entity-col-width-mobile: 180px
  hemma-entity-height-mobile: 120px
  hemma-entity-inner-pad-mobile: 16px
  hemma-entity-name-font-mobile: 14px
  hemma-entity-state-font-mobile: 14px
  hemma-time-nudge-mobile: 8px
  hemma-entity-icon-size-mobile: 28px

  # Entity Layout - Mobile Landscape
  hemma-entity-col-width-landscape: 200px
  hemma-entity-height-landscape: 110px
  hemma-entity-inner-pad-landscape: 16px
  hemma-entity-name-font-landscape: 13px
  hemma-entity-state-font-landscape: 12px
  hemma-entity-icon-size-landscape: 24px
  hemma-tiles-top-landscape-nudge: 0px
  hemma-hero-top-landscape-nudge: 16px

  # Entity Stack Top Position Adjustments
  # Increase to push button card stack lower on screen
  hemma-entity-top-nudge-portrait: 245px
  hemma-entity-top-nudge-landscape: -10px

  # Weather Widget Mobile Portrait Nudge
  # Increase to push weather widget lower to align with room name
  hemma-weather-nudge-mobile: 12px

  # Entity Variables
  hemma-entity-active: rgba(255,255,255,1)
  hemma-entity-inactive: rgba(255,255,255,.75)
  hemma-temp-puck-size: 44px
  hemma-entity-picture-inactive-opacity: .75
  hemma-entity-picture-active-opacity: 1
  hemma-entity-picture-inactive-filter: brightness(.75) saturate(.9)
  hemma-entity-picture-active-filter: none
  hemma-entity-text-shadow: 0 0 3px rgba(0, 0, 0, 0.15)

  # ============================================================================
  # BADGE FORMATTING (responsive sizing per breakpoint)
  # ============================================================================

  # Badge Formatting - Global
  badge-background: rgba(0,0,0,0.35)
  badge-title-inactive: rgba(235,235,235,.6)
  badge-br: 9999px
  badge-subline-lh: 1.18
  badge-subline-lh-mobile: 1.15
  badge-shadow: >
    inset 0 10px 14px -14px rgba(0,0,0,0.15),
    inset 0 -10px 14px -14px rgba(0,0,0,0.15),
    inset 0 0 10px 3px rgba(0,0,0,0.05),
    0 12px 24px rgba(0,0,0,0.05)

  # Badge Formatting - Desktop
  badge-gap: 10px
  badge-row-gap: 2px
  badge-col-gap: 4px
  badge-padding: 4px 15px 4px 9px
  badge-min-height: 50px
  badge-icon-size: 36px
  badge-font-size: 16px
  badge-btn-size: 22px

  # Badge Formatting - Tablet
  badge-gap-tablet: 10px
  badge-row-gap-tablet: 2px
  badge-col-gap-tablet: 4px
  badge-padding-tablet: 3px 14px 3px 8px
  badge-min-height-tablet: 50px
  badge-icon-size-tablet: 36px
  badge-font-size-tablet: 14px
  badge-btn-size-tablet: 20px

  # Badge Formatting - Mobile
  badge-gap-mobile: 10px
  badge-row-gap-mobile: 2px
  badge-col-gap-mobile: 4px
  badge-padding-mobile: 1px 14px 1px 6px
  badge-min-height-mobile: 43px
  badge-icon-size-mobile: 32px
  badge-font-size-mobile: 13px
  badge-btn-size-mobile: 18px

  # Badge Formatting - Mobile Landscape
  badge-gap-landscape: 10px
  badge-row-gap-landscape: 3px
  badge-col-gap-landscape: 3px
  badge-padding-landscape: 1px 12px 1px 6px
  badge-min-height-landscape: 36px
  badge-icon-size-landscape: 26px
  badge-font-size-landscape: 12px
  badge-btn-size-landscape: 16px
  badge-subline-lh-landscape: 1.12

  # ============================================================================
  # HERO SECTION (room title, temperature, layout)
  # ============================================================================

  # Hero Title - Mobile Landscape
  hero-title-size-landscape: clamp(28px, 4.6vw + 4px, 40px)
  hero-title-line-height-landscape: 1.10
  hero-title-letter-spacing-landscape: -1px
  hero-title-margin-left-landscape: 2px

  # Temperature Formatting
  hero-header-gap-desktop: 6px
  hero-header-gap-tablet: 6px
  hero-header-gap-mobile: 5px
  hero-temp-font-size-desktop: 18px
  hero-temp-font-size-tablet: 16px
  hero-temp-font-size-mobile: 14px

  # Layout / Spacing
  page-gutter-desktop: 8vw
  page-gutter-tablet: 4vw
  page-gutter-mobile: 11px

  # Header Top
  header-top-desktop: clamp(280px, 24vh, 300px)
  header-top-tablet: clamp(220px, 24vh, 320px)
  header-top-mobile: clamp(30px, 16vh, 70px)
  header-top-mobile-nudge: -10px

  # Header Height
  hemma-header-cap-desktop: clamp(260px, 30vh, 380px)
  hemma-header-cap-tablet:  clamp(230px, 28vh, 340px)
  hemma-header-cap-mobile:  clamp(240px, 34vh, 360px)
  hemma-header-cap-landscape: clamp(170px, 44vh, 240px)

  # Header Adjusments
  hemma-header-temp-nudge: 3px
  hemma-header-badge-nudge: -4px

  # Navigation Sizing
  hemma-nav-margin-desktop: 8vw
  hemma-nav-margin-tablet: 4.3vw
  hemma-nav-gap-desktop: 50px
  hemma-nav-gap-tablet: 45px
  hemma-nav-top-desktop: 60px
  hemma-nav-top-tablet: 55px

  # Hero Title Sizing
  hero-title-size-desktop: clamp(52px, 4.6vw + 8px, 96px)
  hero-title-size-tablet: clamp(68px, 5.5vw + 8px, 90px)
  hero-title-size-mobile: clamp(38px, 4vw + 2px, 64px)
  hero-title-line-height-desktop: 1.18
  hero-title-line-height-tablet: 1.18
  hero-title-line-height-mobile: 1.1
  hero-title-letter-spacing-desktop: -2px
  hero-title-letter-spacing-tablet: -1.5px
  hero-title-letter-spacing-mobile: -1.2px
  hero-title-margin-left-desktop: -2px
  hero-title-margin-left-tablet: 2px
  hero-title-margin-left-mobile: 5px

  # Hero Formatting
  hero-img-blur: 4px
  hero-img-scale: 1.08
  hero-img-saturate: 1.02
  hero-img-brightness: 0.985
  hero-img-saturate-from: 1.0
  hero-img-brightness-from: 0.97

  # Media Badge Width Cap
  badge-media-max-width-desktop: 640px
  badge-media-max-width-tablet: 520px
  badge-media-max-width-mobile: 100%

  # ============================================================================
  # DIALOGS, CARDS & UI COMPONENTS
  # ============================================================================

  # Dialog
  ha-dialog-surface-backdrop-filter: blur(10px) saturate(1.2)
  ha-dialog-surface-background: var(--ha-dialog-background)
  ha-dialog-scrim-backdrop-filter: none
  ha-card-backdrop-filter: none
  ha-dialog-border-radius: 28px
  dialog-box-shadow: var(--ha-card-box-shadow)

  # Cards
  card-background-color: var(--secondary-background-color)
  paper-listbox-background-color: var(--primary-background-color)
  ha-card-header-color: var(--primary-text-color)
  paper-card-background-color: var(--ha-card-background)
  ha-card-border-color: transparent
  ha-card-border-radius: 28px
  ha-card-border-width: 0
  stack-card-gap: 0px
  horizontal-stack-card-gap: 10px

  # Input
  input-fill-color: rgba(130,130,130,0.3)
  input-ink-color: rgba(255,255,255,0.8)
  input-label-ink-color: rgba(255,255,255,0.6)
  input-disabled-ink-color: rgba(255,255,255,0.37)
  input-dropdown-icon-color: rgba(255,255,255,0.54)
  mdc-text-field-fill-color: rgba(130,130,130,0.3)
  ha-color-red-40: '#d6314a'

  # Code Editor
  code-editor-background-color: '#161616'

  # Layout Tweaks
  masonry-view-card-margin: 0px

  # Browser Mod Extras
  clear-background-color: var(--ha-card-background)

  # ============================================================================
  # CARD-MOD GLOBAL STYLES (responsive media queries, layout overrides)
  # ============================================================================

  card-mod-theme: "Hemma"

  card-mod-root-yaml: |
    .: |
      html, body,
      #view, hui-view {
        overflow-x: hidden !important;
        max-width: 100vw !important;
      }

      @media (max-width: 767px) and (orientation: portrait) {
        html, body {
          overflow: hidden !important;
          height: 100% !important;
          width: 100% !important;
          position: fixed !important;
          overscroll-behavior: none !important;
        }

        home-assistant,
        home-assistant-main,
        ha-panel-lovelace,
        hui-root,
        ha-app-layout,
        #view,
        hui-view,
        hui-view-container {
          overflow: hidden !important;
          height: 100svh !important;
          max-height: 100svh !important;
          overscroll-behavior: none !important;
          touch-action: none !important;
        }
      }

      :host, ha-app-layout {
        --hemma-header-offset: var(--app-header-height, var(--header-height, 0px));
      }

      body.kiosk-mode,
      ha-panel-lovelace.kiosk-mode,
      ha-panel-lovelace[is-kiosk],
      ha-app-layout.kiosk-mode,
      ha-app-layout[is-kiosk]{
        --hemma-header-offset: 0px !important;
      }

      :not(.edit-mode) > hui-view::after,
      :not(.edit-mode) > hui-view:after {
        display: none !important;
      }

      ha-card.navbar-card.desktop.bottom.docked.type-custom-navbar-card{
        display: none !important;
        height: 0 !important;
        min-height: 0 !important;
        padding: 0 !important;
        margin: 0 !important;
        border: 0 !important;
        box-shadow: none !important;
        overflow: hidden !important;
      }

      /* Position more-info dialogs */
      ha-more-info-dialog,
      ha-dialog {
        --vertical-align-dialog: flex-end;
        --dialog-surface-margin-top: 15vh;
      }

      ha-more-info-dialog .mdc-dialog,
      ha-dialog .mdc-dialog {
        align-items: center !important;
        justify-content: center !important;
      }

      ha-more-info-dialog .mdc-dialog__container,
      ha-dialog .mdc-dialog__container {
        align-items: center !important;
        justify-content: center !important;
        margin-top: 10vh !important;
      }

      ha-more-info-dialog .mdc-dialog__surface,
      ha-dialog .mdc-dialog__surface {
        margin-top: auto !important;
        margin-bottom: auto !important;
      }

      /* Mobile - position dialogs from bottom */
      @media (max-width: 767px) {
        ha-more-info-dialog .mdc-dialog__container,
        ha-dialog .mdc-dialog__container {
          align-items: flex-end !important;
          justify-content: flex-end !important;
          margin-top: 0 !important;
        }

        ha-more-info-dialog .mdc-dialog__surface,
        ha-dialog .mdc-dialog__surface {
          margin-top: auto !important;
          margin-bottom: 0 !important;
        }
      }

      layout-card{
        --layout-margin: 0px !important;
        --layout-padding: 0px !important;
        --layout-height: auto !important;
        --layout-overflow: visible !important;
      }

      layout-card$ #container{
        height: auto !important;
        min-height: 0 !important;
        align-items: flex-start !important;
        justify-content: flex-start !important;
      }

      layout-card$ #container > *{
        min-height: 0 !important;
      }

      /* Desktop */
      html,
      :host,
      ha-app-layout {
        --page-gutter: var(--page-gutter-desktop);
        --hemma-rail-left: var(--page-gutter-desktop);
        --content-rail: var(--hemma-rail-left);
        --hero-top: var(--header-top-desktop);
        --hero-gutter: var(--page-gutter-desktop);
        --hero-header-gap-current: var(--hero-header-gap-desktop, 6px);
        --hero-temp-font-size: var(--hero-temp-font-size-desktop, 18px);
        --hemma-header-stack-h-current: var(--hemma-header-cap-desktop, clamp(260px, 30vh, 380px));
        --hemma-nav-margin-current: var(--hemma-nav-margin-desktop, 8vw);
        --hemma-nav-gap-current: var(--hemma-nav-gap-desktop, 50px);
        --hemma-nav-top-current: var(--hemma-nav-top-desktop, 60px);
        --hero-room-name-size-current: var(--hero-title-size-desktop, clamp(52px, 4.6vw + 8px, 96px));
        --hero-room-name-line-height-current: var(--hero-title-line-height-desktop, 1.18);
        --hero-room-name-letter-spacing-current: var(--hero-title-letter-spacing-desktop, -2px);
        --hero-room-name-margin-left-current: var(--hero-title-margin-left-desktop, -2px);
        --badge-media-max-width-current: var(--badge-media-max-width-desktop, 640px);
        --badge-gap-current: var(--badge-gap, 10px);
        --badge-row-gap-current: var(--badge-row-gap, 6px);
        --badge-col-gap-current: var(--badge-col-gap, 10px);
        --badge-padding-current: var(--badge-padding, 4px 15px 4px 9px);
        --badge-min-height-current: var(--badge-min-height, 52px);
        --badge-icon-size-current: var(--badge-icon-size, 34px);
        --badge-font-size-current: var(--badge-font-size, 16px);
        --badge-btn-size-current: var(--badge-btn-size, 22px);
        --badge-subline-lh-current: var(--badge-subline-lh, 1.18);
        --hemma-entity-col-width-current: var(--hemma-entity-col-width-desktop, 280px);
        --hemma-entity-height-current: var(--hemma-entity-height-desktop, 180px);
        --hemma-entity-rows-current: var(--hemma-entity-rows-desktop, repeat(1, auto));
        --hemma-entity-justify-current: var(--hemma-entity-justify-desktop, flex-start);
        --hemma-entity-right-inset-current: var(--hemma-entity-right-inset-desktop, 0px);
        --hemma-entity-left-inset-current: var(--hemma-rail-left, var(--page-gutter, 8vw));
        --hemma-entity-bottom-current: var(--hemma-entity-bottom-desktop, 20px);
        --hemma-entity-shadow-pad-right-current: var(--hemma-entity-shadow-pad-right-desktop, 0px);
        --hemma-entity-overflow-y-current: var(--hemma-entity-overflow-y-desktop, hidden);
        --hemma-entity-inner-pad-current: var(--hemma-entity-inner-pad-desktop, 24px);
        --hemma-entity-name-font-current: var(--hemma-entity-name-font-desktop, 18px);
        --hemma-entity-state-font-current: var(--hemma-entity-state-font-desktop, 15px);
        --hemma-entity-icon-size-current: var(--hemma-entity-icon-size-desktop, 34px);
      }

      /* Tablet */
      @media (min-width: 768px) and (max-width: 1249px) and (min-height: 501px) and (hover: none) and (pointer: coarse) {
        html,
        :host,
        ha-app-layout {
          --page-gutter: var(--page-gutter-tablet);
          --hemma-rail-left: var(--page-gutter-tablet);
          --content-rail: var(--hemma-rail-left);
          --hero-top: var(--header-top-tablet);
          --hero-gutter: var(--page-gutter-tablet);
          --hero-header-gap-current: var(--hero-header-gap-tablet, 6px);
          --hero-temp-font-size: var(--hero-temp-font-size-tablet, 16px);
          --hemma-header-stack-h-current: var(--hemma-header-cap-tablet, clamp(230px, 28vh, 340px));
          --hemma-nav-margin-current: var(--hemma-nav-margin-tablet, 4vw);
          --hemma-nav-gap-current: var(--hemma-nav-gap-tablet, 34px);
          --hemma-nav-top-current: var(--hemma-nav-top-tablet, 46px);
          --hero-room-name-size-current: var(--hero-title-size-tablet, clamp(36px, 4.2vw + 6px, 64px));
          --hero-room-name-line-height-current: var(--hero-title-line-height-tablet, 1.18);
          --hero-room-name-letter-spacing-current: var(--hero-title-letter-spacing-tablet, -1.5px);
          --hero-room-name-margin-left-current: var(--hero-title-margin-left-tablet, -1px);
          --badge-media-max-width-current: var(--badge-media-max-width-tablet, 520px);
          --badge-gap-current: var(--badge-gap-tablet, var(--badge-gap, 10px));
          --badge-row-gap-current: var(--badge-row-gap-tablet, var(--badge-row-gap, 6px));
          --badge-col-gap-current: var(--badge-col-gap-tablet, var(--badge-col-gap, 10px));
          --badge-padding-current: var(--badge-padding-tablet, var(--badge-padding, 4px 15px 4px 9px));
          --badge-min-height-current: var(--badge-min-height-tablet, var(--badge-min-height, 52px));
          --badge-icon-size-current: var(--badge-icon-size-tablet, var(--badge-icon-size, 34px));
          --badge-font-size-current: var(--badge-font-size-tablet, var(--badge-font-size, 16px));
          --badge-btn-size-current: var(--badge-btn-size-tablet, var(--badge-btn-size, 22px));
          --hemma-entity-col-width-current: var(--hemma-entity-col-width-tablet, 210px);
          --hemma-entity-height-current: var(--hemma-entity-height-tablet, 150px);
          --hemma-entity-overflow-y-current: var(--hemma-entity-overflow-y-tablet, var(--hemma-entity-overflow-y-desktop, hidden));
          --hemma-entity-inner-pad-current: var(--hemma-entity-inner-pad-tablet, 18px);
          --hemma-entity-name-font-current: var(--hemma-entity-name-font-tablet, 15px);
          --hemma-entity-state-font-current: var(--hemma-entity-state-font-tablet, 13px);
          --hemma-entity-icon-size-current: var(--hemma-entity-icon-size-tablet, 28px);
        }
      }

      /* Mobile Portrait */
      @media (max-width: 767px) and (orientation: portrait) {
        html,
        :host,
        ha-app-layout {
          --page-gutter: var(--page-gutter-mobile);
          --hemma-rail-left: var(--page-gutter-mobile);
          --content-rail: var(--hemma-rail-left);
          --hero-top: calc(var(--header-top-mobile) - var(--header-top-mobile-nudge, 0px));
          --hero-gutter: var(--page-gutter-mobile);
          --hero-header-gap-current: var(--hero-header-gap-mobile, 5px);
          --hero-temp-font-size: var(--hero-temp-font-size-mobile, 14px);
          --hemma-header-stack-h-current: var(--hemma-header-cap-mobile, clamp(240px, 34vh, 360px));
          --hero-room-name-size-current: var(--hero-title-size-mobile, clamp(38px, 9vw + 2px, 64px));
          --hero-room-name-line-height-current: var(--hero-title-line-height-mobile, 1.20);
          --hero-room-name-letter-spacing-current: var(--hero-title-letter-spacing-mobile, -1.2px);
          --hero-room-name-margin-left-current: var(--hero-title-margin-left-mobile, 2px);
          --badge-media-max-width-current: var(--badge-media-max-width-mobile, 100%);
          --badge-gap-current: var(--badge-gap-mobile, var(--badge-gap, 10px));
          --badge-row-gap-current: var(--badge-row-gap-mobile, var(--badge-row-gap, 6px));
          --badge-col-gap-current: var(--badge-col-gap-mobile, var(--badge-col-gap, 10px));
          --badge-padding-current: var(--badge-padding-mobile, var(--badge-padding, 4px 15px 4px 9px));
          --badge-min-height-current: var(--badge-min-height-mobile, var(--badge-min-height, 52px));
          --badge-icon-size-current: var(--badge-icon-size-mobile, var(--badge-icon-size, 32px));
          --badge-font-size-current: var(--badge-font-size-mobile, var(--badge-font-size, 16px));
          --badge-btn-size-current: var(--badge-btn-size-mobile, var(--badge-btn-size, 22px));
          --badge-subline-lh-current: var(--badge-subline-lh-mobile, var(--badge-subline-lh, 1.18));
          --hemma-entity-col-width-current: var(--hemma-entity-col-width-mobile, 180px);
          --hemma-entity-height-current: var(--hemma-entity-height-mobile, 120px);
          --hemma-entity-inner-pad-current: var(--hemma-entity-inner-pad-mobile, 16px);
          --hemma-entity-name-font-current: var(--hemma-entity-name-font-mobile, 14px);
          --hemma-entity-state-font-current: var(--hemma-entity-state-font-mobile, 14px);
          --hemma-entity-icon-size-current: var(--hemma-entity-icon-size-mobile, 28px);
        }

        app-header ha-menu-button,
        app-toolbar ha-menu-button{
          display: none !important;
        }
      }

      /* Mobile Landscape */
      @media (hover: none) and (pointer: coarse) and (orientation: landscape) and (max-height: 600px) {
        html,
        :host,
        ha-app-layout {
          --page-gutter: var(--page-gutter-mobile);
          --hemma-rail-left: var(--page-gutter-mobile);
          --content-rail: var(--hemma-rail-left);
          --hero-gutter: 18px;
          --hero-top: calc(env(safe-area-inset-top, 0px) + 96px + var(--hemma-hero-top-landscape-nudge, 0px));
          --hemma-tiles-top-landscape: calc(var(--hero-top) + var(--hemma-tiles-top-landscape-nudge, 0px));
          --hemma-entity-col-width-current: var(--hemma-entity-col-width-landscape, 200px);
          --hemma-entity-height-current: var(--hemma-entity-height-landscape, 110px);
          --hemma-entity-inner-pad-current: var(--hemma-entity-inner-pad-landscape, 14px);
          --hemma-entity-name-font-current: var(--hemma-entity-name-font-landscape, 13px);
          --hemma-entity-state-font-current: var(--hemma-entity-state-font-landscape, 12px);
          --hemma-entity-icon-size-current: var(--hemma-entity-icon-size-landscape, 24px);
          --hemma-landscape-left-rail: clamp(240px, 34vw, 320px);
          --hemma-landscape-badge-stop-pad: 12px;
          --badge-media-max-width-current: calc(var(--hemma-landscape-left-rail) - var(--hemma-landscape-badge-stop-pad));
          --hemma-header-stack-h-current: var(--hemma-header-cap-landscape, clamp(170px, 44vh, 240px));
          --hero-room-name-size-current: var(--hero-title-size-landscape, clamp(32px, 5.6vw + 6px, 46px));
          --hero-room-name-line-height-current: var(--hero-title-line-height-landscape, 1.12);
          --hero-room-name-letter-spacing-current: var(--hero-title-letter-spacing-landscape, -1px);
          --hero-room-name-margin-left-current: var(--hero-title-margin-left-landscape, var(--hero-room-name-margin-left-current, 0px));
          --badge-gap-current: var(--badge-gap-landscape, var(--badge-gap-mobile, var(--badge-gap, 10px)));
          --badge-row-gap-current: var(--badge-row-gap-landscape, var(--badge-row-gap-mobile, var(--badge-row-gap, 4px)));
          --badge-col-gap-current: var(--badge-col-gap-landscape, var(--badge-col-gap-mobile, var(--badge-col-gap, 4px)));
          --badge-padding-current: var(--badge-padding-landscape, var(--badge-padding-mobile, var(--badge-padding, 1px 14px 1px 6px)));
          --badge-min-height-current: var(--badge-min-height-landscape, var(--badge-min-height-mobile, var(--badge-min-height, 43px)));
          --badge-icon-size-current: var(--badge-icon-size-landscape, var(--badge-icon-size-mobile, var(--badge-icon-size, 32px)));
          --badge-font-size-current: var(--badge-font-size-landscape, var(--badge-font-size-mobile, var(--badge-font-size, 13px)));
          --badge-btn-size-current: var(--badge-btn-size-landscape, var(--badge-btn-size-mobile, var(--badge-btn-size, 18px)));
          --badge-subline-lh-current: var(--badge-subline-lh-landscape, var(--badge-subline-lh-mobile, var(--badge-subline-lh, 1.18)));
        }
      }

      @media (prefers-reduced-motion: reduce) {
        .m__run, .eq .b { animation: none !important; }
      }

      .hemma-entities,
      .hemma-entities > div {
        scrollbar-width: none;
        -ms-overflow-style: none;
      }
      .hemma-entities::-webkit-scrollbar,
      .hemma-entities > div::-webkit-scrollbar {
        width: 0 !important;
        height: 0 !important;
        background: transparent !important;
      }

      app-header,
      app-toolbar {
        background: transparent;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
      }

      ha-card {
        transition: filter .2s ease, opacity .2s ease;
      }

      @media (min-width: 768px) and (max-width: 1249px) and (orientation: portrait) and (hover: none){
        :host, ha-app-layout{
          --hemma-entity-bottom-current: calc(env(safe-area-inset-bottom, 0px) + 14px);
          --hemma-time-opacity: 0.4;
        }
      }
      @media (min-width: 768px) and (max-width: 1249px) and (orientation: landscape) and (hover: none){
        :host, ha-app-layout{
          --hemma-entity-bottom-current: 12px;
          --hemma-time-opacity: 0.4;
        }
      }

  card-mod-view-yaml: |
    .: |
      hui-view,
      hui-view > #columns {
        min-height: 100% !important;
        max-width: 100vw !important;
        overflow-x: hidden !important;
      }

      :host {
        overflow: hidden !important;
        height: 100svh !important;
        max-height: 100svh !important;
        -webkit-overflow-scrolling: auto !important;
        overscroll-behavior: none !important;
      }

      :host .hemma-entities{
        height: 100svh !important;
        max-height: 100svh !important;

        overflow-y: auto !important;
        overflow-x: hidden !important;
        -webkit-overflow-scrolling: touch !important;

        overscroll-behavior: contain !important;
        touch-action: pan-y !important;
        overflow-anchor: none !important;
        scroll-snap-type: y proximity !important;
        padding-bottom: var(--tiles-pad-bottom) !important;
      }

      /* Mobile Portrait */
      @media (max-width: 767px) and (orientation: portrait) {
        hui-view-container,
        hui-view-container#view,
        #view {
          height: 100svh !important;
          max-height: 100svh !important;
          overflow: hidden !important;
          overscroll-behavior: none !important;
          touch-action: none !important;
          padding-top: 0 !important;
          --kiosk-header-height: 0px !important;
        }

        hui-view,
        hui-view > #columns,
        grid-layout,
        layout-card {
          height: auto !important;
          min-height: 0 !important;
          max-height: none !important;
          overflow: visible !important;
          overscroll-behavior: none !important;
          padding-top: 0 !important;
        }

        :host {
          overflow: hidden !important;
          overscroll-behavior: none !important;
          touch-action: none !important;
          padding-top: 0 !important;
        }

        :host .hemma-entities {
          position: relative !important;
          touch-action: pan-y !important;
        }
      }

      @media (min-width: 768px) and (max-width: 1249px) and (min-height: 501px) and (hover: none) and (pointer: coarse) {
        :host {
          overflow: hidden !important;
          overscroll-behavior-y: none !important;
          touch-action: manipulation !important;
        }

        hui-view-container#view {
          height: 100vh !important;
          min-height: 100vh !important;
          overflow: hidden !important;
        }

        hui-view,
        hui-view > #columns {
          height: 100vh !important;
          min-height: 100vh !important;
          overflow: hidden !important;
          overscroll-behavior-y: none !important;
        }
      }

      @media (max-width: 767px), (max-height: 500px) {
        :host::after{
          content:"";
          position: fixed;
          left: 0;
          right: 0;
          top: 85svh;
          bottom: 0;
          height: auto;
          pointer-events: none;
          z-index: 1;
          background: var(--hemma-nav-fade);
          transform: translateZ(0);
        }
      }

      @media (max-height: 500px) and (orientation: landscape){
        :host::after{ display: none !important; }
      }

  card-mod-card: |
    ha-card {
      transition: filter .22s ease, transform .12s ease !important;
      will-change: filter, transform;
    }

    @media (hover:hover) {
      :host(:not(.hemma-room)) ha-card:hover,
      :host(:not(.hemma-room)) ha-card:focus-within {
        filter: var(--hemma-hover-filter, brightness(1.10)) !important;
      }
    }

    @media (hover:none) {
      :host(:not(.hemma-room)) ha-card:active {
        filter: var(--hemma-hover-filter, brightness(1.12)) !important;
      }
    }

    :host(.hemma-entity) {
      position: relative !important;
      z-index: 0 !important;
      display: block !important;
      border-radius: var(--ha-card-border-radius, 28px) !important;
      overflow: visible !important;
      contain: none !important;
      box-shadow: var(--button-card-box-shadow, var(--ha-card-box-shadow)) !important;
    }

    :host(.hemma-entity) ha-card {
      position: relative !important;
      z-index: 0 !important;
      border-radius: inherit !important;
      overflow: hidden !important;
      background-clip: padding-box;
      box-shadow: none !important;
    }

    :host(.hemma-entity) ha-card::before {
      content:"";
      position:absolute;
      inset:0;
      border-radius:inherit;
      pointer-events:none;
      z-index:1;

      --v-alpha:  var(--vignette-alpha, 0.78);
      --v-edge:   var(--vignette-edge, 0.68);
      --v-bottom: var(--vignette-bottom, 0.34);
      --v-on:     var(--dark-vignette, 0);

      --v-a-corner: calc(.30 * var(--v-alpha) * var(--v-on));
      --v-a-edge:   calc(.22 * var(--v-edge)  * var(--v-on));
      --v-a-bottom: calc(.24 * var(--v-bottom)* var(--v-on));

      background:
        radial-gradient(140% 140% at -10% -10%, rgba(0,0,0,var(--v-a-corner)) 0%, rgba(0,0,0,0) 60%),
        radial-gradient(140% 140% at 110% 110%, rgba(0,0,0,var(--v-a-corner)) 0%, rgba(0,0,0,0) 60%),
        radial-gradient(120% 120% at 50% 120%, rgba(0,0,0,var(--v-a-bottom)) 0%, rgba(0,0,0,0) 60%),
        linear-gradient(0deg, rgba(0,0,0,var(--v-a-edge)) 0%, rgba(0,0,0,0) 30%);

      mix-blend-mode: multiply;
    }

    :host(.hemma-entity) ha-card:active {
      transform: translateY(.5px);
      backface-visibility: hidden;
      will-change: transform;
    }

    :host(.hemma-hero),
    :host(.hemma-hero) ha-card,
    :host(.hemma-hero) .button-card-main,
    :host(.hemma-hero) .button-card-content{
      direction: ltr !important;
      text-align: left !important;
    }

    :host(.hemma-hero) #custom_fields{
      direction: ltr !important;
      justify-content: flex-start !important;
      justify-items: start !important;
      place-content: start !important;
      text-align: left !important;
    }

    :host(.hemma-hero) #custom_fields > div[id^="badges"],
    :host(.hemma-hero) #custom_fields > div[id*="badge"]{
      direction: ltr !important;
      justify-self: start !important;
      align-self: start !important;
      place-self: start !important;
      margin-right: auto !important;
      text-align: left !important;
    }
